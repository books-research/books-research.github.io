<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>StringBuilderCapacityManagement - Java Data Structures and Algorithms for Beginners</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/ferris.css">
        <link rel="stylesheet" href="../../theme/semantic-notes.css">
        <link rel="stylesheet" href="../../theme/listing.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Java Data Structures and Algorithms for Beginners</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>
body {
  text-align: justify;
}
</style>
<h1 id="stringbuilder-capacity-management"><a class="header" href="#stringbuilder-capacity-management">StringBuilder Capacity Management</a></h1>
<h2 id="problem-statement"><a class="header" href="#problem-statement">Problem Statement</a></h2>
<p>Write a Java program that demonstrates StringBuilder’s capacity resizing by appending strings and monitoring capacity changes using the <code>capacity()</code> method. The program should analyze when resizing occurs and how the capacity adjusts based on the appended content. Test the implementation with different scenarios, including appending small strings, large strings, and using StringBuilder instances with varying initial capacities. You can visualize this as filling a stretchable notebook, where the notebook expands its pages (capacity) automatically when you add more notes, and you track how and when it grows to accommodate the text.</p>
<p><strong>Input</strong>: A series of strings to append to StringBuilder instances with different initial configurations (e.g., default capacity, specified initial capacity).
<strong>Output</strong>: The final string, a log of capacity changes after each append operation, and an analysis of when resizing occurs.
<strong>Constraints</strong>:</p>
<ul>
<li>String lengths are between 0 and 10^5.</li>
<li>Strings contain printable ASCII characters.</li>
<li>Initial capacities are non-negative integers.</li>
<li>The input strings may be null or empty.
<strong>Example</strong>:</li>
<li>Input: Append <code>"hello"</code>, <code>" world"</code> to a StringBuilder with default capacity (16).</li>
<li>Output:
<pre><code>Initial capacity: 16
After appending "hello": length=5, capacity=16
After appending " world": length=11, capacity=16
Final string: "hello world"
</code></pre>
</li>
<li>Explanation: No resizing occurs as the total length (11) fits within the initial capacity (16).</li>
<li>Input: Append a 20-character string to a StringBuilder with default capacity (16).</li>
<li>Output:
<pre><code>Initial capacity: 16
After appending: length=20, capacity=34
Final string: "abcdefghijklmnopqrst"
</code></pre>
</li>
<li>Explanation: Resizing occurs because 20 exceeds 16, new capacity = (16 * 2) + 2 = 34.</li>
</ul>
<h2 id="pseudocode"><a class="header" href="#pseudocode">Pseudocode</a></h2>
<pre><code>FUNCTION demonstrateCapacityManagement(testCases)
    FOR each testCase in testCases
        SET initialCapacity to testCase.initialCapacity
        SET strings to testCase.strings
        CREATE stringBuilder with initialCapacity
        PRINT initial capacity
        FOR each string in strings
            SET oldCapacity to stringBuilder.capacity()
            APPEND string to stringBuilder
            SET newCapacity to stringBuilder.capacity()
            PRINT length, capacity, and whether resizing occurred
        ENDFOR
        PRINT final string
    ENDFOR
ENDFUNCTION

FUNCTION main()
    SET testCases to array of (initialCapacity, strings) pairs
    CALL demonstrateCapacityManagement(testCases)
ENDFUNCTION
</code></pre>
<h2 id="algorithm-steps"><a class="header" href="#algorithm-steps">Algorithm Steps</a></h2>
<ol>
<li>Define a method to demonstrate capacity management:
a. For each test case, create a StringBuilder with the specified initial capacity.
b. Print the initial capacity using <code>capacity()</code>.
c. For each string to append:
<ul>
<li>Record the current capacity.</li>
<li>Append the string using <code>StringBuilder.append</code>.</li>
<li>Check the new capacity and note if resizing occurred (capacity increased).</li>
<li>Print the current length, capacity, and resizing status.
d. Print the final string.</li>
</ul>
</li>
<li>Handle null or empty strings by skipping or appending empty content.</li>
<li>In the <code>main</code> method, test with different scenarios:
<ul>
<li>Default capacity (16) with small strings.</li>
<li>Default capacity with a large string that triggers resizing.</li>
<li>Custom initial capacity with multiple appends.</li>
<li>Empty or null strings.</li>
</ul>
</li>
<li>Analyze resizing: StringBuilder doubles the current capacity and adds 2 when the length exceeds the capacity.</li>
</ol>
<h2 id="java-implementation"><a class="header" href="#java-implementation">Java Implementation</a></h2>
<pre><code class="language-java">public class StringBuilderCapacityManagement {
    // Demonstrates StringBuilder capacity resizing
    public void demonstrateCapacityManagement(String[][] testCases, int[] initialCapacities) {
        for (int i = 0; i &lt; testCases.length; i++) {
            String[] strings = testCases[i];
            int initialCapacity = initialCapacities[i];
            System.out.println("Test case " + (i + 1) + ":");
            System.out.println("Initial capacity: " + initialCapacity);
            
            StringBuilder sb = new StringBuilder(initialCapacity);
            for (int j = 0; j &lt; strings.length; j++) {
                String str = strings[j] != null ? strings[j] : "";
                int oldCapacity = sb.capacity();
                sb.append(str);
                int newCapacity = sb.capacity();
                System.out.println("After appending \"" + (str.length() &gt; 20 ? str.substring(0, 20) + "..." : str) + "\": " +
                                   "length=" + sb.length() + ", capacity=" + newCapacity +
                                   (newCapacity &gt; oldCapacity ? " (resized)" : ""));
            }
            System.out.println("Final string: \"" + (sb.length() &gt; 50 ? sb.substring(0, 50) + "..." : sb.toString()) + "\"\n");
        }
    }

    // Main method to test capacity management
    public static void main(String[] args) {
        StringBuilderCapacityManagement manager = new StringBuilderCapacityManagement();

        // Test cases
        String[][] testCases = {
            {"hello", " world"},                    // Small strings, default capacity
            {generateLargeString(20)},             // Large string, triggers resizing
            {"a", "b", "c", "d"},                 // Multiple small strings, custom capacity
            {""},                                  // Empty string
            {null}                                 // Null string
        };
        int[] initialCapacities = {16, 16, 5, 16, 16}; // Corresponding initial capacities

        manager.demonstrateCapacityManagement(testCases, initialCapacities);
    }

    // Helper method to generate a large string
    private static String generateLargeString(int length) {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i &lt; length; i++) {
            sb.append((char) ('a' + (i % 26)));
        }
        return sb.toString();
    }
}
</code></pre>
<h2 id="output"><a class="header" href="#output">Output</a></h2>
<p>Running the <code>main</code> method produces (actual capacities may vary slightly depending on JVM implementation):</p>
<pre><code>Test case 1:
Initial capacity: 16
After appending "hello": length=5, capacity=16
After appending " world": length=11, capacity=16
Final string: "hello world"

Test case 2:
Initial capacity: 16
After appending "abcdefghijklmnopqrst...": length=20, capacity=34 (resized)
Final string: "abcdefghijklmnopqrst"

Test case 3:
Initial capacity: 5
After appending "a": length=1, capacity=5
After appending "b": length=2, capacity=5
After appending "c": length=3, capacity=5
After appending "d": length=4, capacity=5
Final string: "abcd"

Test case 4:
Initial capacity: 16
After appending "": length=0, capacity=16
Final string: ""

Test case 5:
Initial capacity: 16
After appending "": length=0, capacity=16
Final string: ""
</code></pre>
<p>Explanation:</p>
<ul>
<li>Test case 1: Appends <code>"hello"</code>, <code>" world"</code>. Length (11) &lt; capacity (16), no resizing.</li>
<li>Test case 2: Appends 20-character string. Length (20) &gt; 16, resizes to (16 * 2) + 2 = 34.</li>
<li>Test case 3: Custom capacity 5, appends four single characters. Length (4) ≤ 5, no resizing.</li>
<li>Test case 4: Empty string, no change in length or capacity.</li>
<li>Test case 5: Null string treated as empty, no change.</li>
</ul>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h2>
<ul>
<li><strong>StringBuilder Capacity</strong>: Represents the size of the internal character array. Default is 16 if not specified.</li>
<li><strong>Resizing</strong>: When the length exceeds capacity, StringBuilder allocates a new array with capacity = (oldCapacity * 2) + 2.</li>
<li><strong>demonstrateCapacityManagement</strong>:
<ul>
<li>Creates StringBuilder with specified initial capacity.</li>
<li>Tracks capacity before and after each append.</li>
<li>Reports resizing when new capacity exceeds old capacity.</li>
</ul>
</li>
<li><strong>Example Trace (Test case 2)</strong>:
<ul>
<li>Initial: <code>capacity = 16</code>, <code>length = 0</code>.</li>
<li>Append <code>"abcdefghijklmnopqrst"</code> (20 chars): <code>length = 20</code> &gt; 16, new capacity = (16 * 2) + 2 = 34.</li>
</ul>
</li>
<li><strong>Main Method</strong>: Tests with small strings, large strings triggering resizing, custom capacity, and edge cases.</li>
<li><strong>Analysis</strong>: Resizing occurs when the total length after appending exceeds the current capacity, doubling the capacity plus 2 to accommodate future appends efficiently.</li>
</ul>
<h2 id="complexity-analysis-table"><a class="header" href="#complexity-analysis-table">Complexity Analysis Table</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time Complexity</th><th>Space Complexity</th></tr></thead><tbody>
<tr><td>Append</td><td>O(m)</td><td>O(m)</td></tr>
<tr><td>Capacity Check</td><td>O(1)</td><td>O(1)</td></tr>
<tr><td>Resizing</td><td>O(n)</td><td>O(n)</td></tr>
<tr><td>Full Algorithm</td><td>O(k * m)</td><td>O(n + k * m)</td></tr>
</tbody></table>
</div>
<p><em>Note</em>:</p>
<ul>
<li>n is the current length of the StringBuilder, m is the length of the appended string, k is the number of append operations.</li>
<li>Append: O(m) for copying characters, amortized O(1) if no resizing.</li>
<li>Resizing: O(n) when copying the internal array to a larger one.</li>
<li>Full algorithm: O(k * m) time for k appends, O(n + k * m) space for the final StringBuilder content.</li>
<li>Worst case: Frequent resizing for large strings increases time and space.</li>
</ul>
<blockquote>
<p><strong>✅ Tip</strong>: Set an appropriate initial capacity for StringBuilder when the expected size is known to minimize resizing. Use <code>capacity()</code> to monitor and understand resizing behavior during development.</p>
</blockquote>
<blockquote>
<p><strong>⚠ Warning</strong>: Avoid unnecessarily small initial capacities, as frequent resizing can degrade performance. Handle null inputs to prevent unexpected behavior during append operations.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../problemStatements/ch03_02_01/InsertAndDeleteSimulation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../problemStatements/ch03_02_01/StringReversal.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../problemStatements/ch03_02_01/InsertAndDeleteSimulation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../problemStatements/ch03_02_01/StringReversal.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/ferris.js"></script>


    </div>
    </body>
</html>
